/* Базовые стили и переменные */
:root {
    --primary-bg: #2e2a40;
    --secondary-bg: #4a4466;
    --accent-color: #76d7c4;
    --text-color: #f0f0f0;
    /* --liquid-color: #a569bd; /* Используется в RGBA для жидкости */
    --bubble-color: #e8daef;
    --button-bg: #5d5480;
    --button-hover-bg: #71689a;
    --disabled-color: #6c6c6c;
    --flask-color: #00abc1; /* Базовый цвет для default скина */
    --gem-color: #ff69b4;
    /* --liquid-level задается через JS */
    /* Переменные для обводки удалены */
}

* { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
    height: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
                 Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    background-color: var(--primary-bg);
    color: var(--text-color);
    overflow: hidden;
    -webkit-tap-highlight-color: transparent;
}

.app-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 15px;
    position: relative;
}

/* --- ОБЩИЙ СТИЛЬ ДЛЯ КНОПОК-ИКОНОК --- */
.control-button-icon {
    background: rgba(0, 0, 0, 0.2);
    border: none;
    padding: 0;
    cursor: pointer;
    opacity: 0.8;
    transition: opacity 0.2s ease, background-color 0.2s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    color: var(--text-color);
    overflow: hidden;
}
.control-button-icon:hover { /* ... */ }
.control-button-icon svg { /* ... */ }
.control-button-icon img { /* ... */ }

/* Кнопка настроек */
.settings-button {
    position: absolute;
    top: 15px;
    left: 15px;
    z-index: 51;
    background: none;
    border-radius: 50%;
}

/* --- СТИЛИ ВАЛЮТЫ/МАГАЗИНА --- */
.secondary-currency { /* ... */ }
.gem-display { /* ... */ }
.gem-icon { /* ... */ }
.gem-icon svg { /* ... */ }
#gem-count { /* ... */ }
.shop-button { /* ... */ }
.shop-button svg { /* ... */ }

.header { text-align: center; margin-bottom: 15px; font-size: 1.1em; opacity: 0.8; }
.game-area { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }

/* Стили отображения валют */
.essence-display { /* ... */ }
.main-currency { /* ... */ }
.essence-icon { /* ... */ }
.per-second-display { /* ... */ }

/* Колба (БЕЗ ОБВОДКИ) */
.cauldron {
    width: 180px;
    height: 200px;
    position: relative;
    cursor: pointer;
    user-select: none;
    margin: 20px auto;
    clip-path: polygon(46% 5%, 36% 5%, 34% 10%, 36% 15%, 33% 30%, 22% 50%, 15% 65%, 18% 75%, 23% 85%, 32% 93%, 40% 96%, 50% 97%, 60% 96%, 68% 93%, 77% 85%, 82% 75%, 85% 65%, 78% 50%, 67% 30%, 64% 15%, 66% 10%, 64% 5%, 54% 5%);
    /* --- НАЧАЛО: Изменения для отката обводки --- */
    border: none; /* Убедимся, что нет стандартной рамки */
    /* box-shadow: 0 0 0 3px var(--current-outline-color, transparent); /* УДАЛЕНО */
    /* --current-outline-color: transparent; /* УДАЛЕНО */
    will-change: transform, background; /* Удален box-shadow */
    transition: transform 0.1s ease-out, filter 0.1s ease-out,
                background-color 0.3s ease, background-image 0.3s ease; /* Удален box-shadow */
    /* --- КОНЕЦ: Изменения для отката обводки --- */
    border-radius: 0;
    overflow: visible; /* Оставляем, т.к. не мешает */
}

.cauldron.blocked-cauldron { /* ... */ }

.cauldron::before { /* Жидкость (остается прозрачной) */
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: var(--liquid-level, 10%);
    background-color: rgba(165, 105, 189, 0.65); /* Фиолетовый с 65% непрозрачностью */
    z-index: 1;
    overflow: hidden;
    clip-path: inherit;
    transition: background-color 0.3s ease;
}

.bubbles-container { /* Пузырьки */
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: var(--liquid-level, 10%);
    z-index: 2;
    pointer-events: none;
    overflow: hidden;
    clip-path: inherit;
}

.bubble { /* ... */ }
@keyframes rise { /* ... */ }
.cauldron:active:not(.blocked-cauldron) { /* ... */ }

/* Фидбек при клике */
#click-feedback-container { /* ... */ }
.click-feedback { /* ... */ }
@keyframes fadeUp { /* ... */ }

/* Кнопки управления */
.controls { /* ... */ }
.control-button { /* ... */ }
.telegram-feature { /* ... */ }

/* Общие стили панелей */
.upgrades-panel, .settings-panel .settings-box, .shop-panel { /* ... */ }

/* Панель улучшений */
.upgrades-panel { /* ... */ }
.upgrades-panel:not(.hidden) { /* ... */ }

/* Заголовки панелей */
.panel-header { /* ... */ }
.panel-header h2 { /* ... */ }
.close-button { /* ... */ }

/* Список улучшений */
#upgrades-list { /* ... */ }
#upgrades-list li { /* ... */ }
/* ... (остальные стили улучшений) ... */

/* Панель настроек (БЕЗ ЗВУКА) */
.settings-panel { /* ... */ }
.settings-panel:not(.hidden) { /* ... */ }
.settings-box { /* ... */ }
.settings-content { padding: 15px; overflow-y: auto; flex-grow: 1; }
.settings-content h3 { margin-bottom: 10px; font-size: 1.1em; opacity: 0.9; } /* Упрощено */
.language-options { /* ... */ }
.lang-btn { /* ... */ }
/* Стили для настроек звука удалены */

/* --- Стили Магазина --- */
.shop-panel { /* ... */ }
.shop-panel:not(.hidden) { /* ... */ }
.shop-currency-display { /* ... */ }
/* ... (остальные стили магазина) ... */

#skins-list { /* ... */ }
#skins-list li { /* ... */ }
#skins-list li.active-skin { /* ... */ }

.skin-preview {
    width: 80px;
    height: 90px;
    margin-bottom: 10px;
    border-radius: 5px;
    background-color: #ccc;
    background-size: cover;
    background-position: center;
    position: relative;
    -webkit-clip-path: polygon(46% 5%, 36% 5%, 34% 10%, 36% 15%, 33% 30%, 22% 50%, 15% 65%, 18% 75%, 23% 85%, 32% 93%, 40% 96%, 50% 97%, 60% 96%, 68% 93%, 77% 85%, 82% 75%, 85% 65%, 78% 50%, 67% 30%, 64% 15%, 66% 10%, 64% 5%, 54% 5%);
    clip-path: polygon(46% 5%, 36% 5%, 34% 10%, 36% 15%, 33% 30%, 22% 50%, 15% 65%, 18% 75%, 23% 85%, 32% 93%, 40% 96%, 50% 97%, 60% 96%, 68% 93%, 77% 85%, 82% 75%, 85% 65%, 78% 50%, 67% 30%, 64% 15%, 66% 10%, 64% 5%, 54% 5%);
    /* --- НАЧАЛО: Откат обводки превью --- */
    border: 1px solid rgba(255, 255, 255, 0.1); /* Возвращена простая рамка */
    /* box-shadow: 0 0 0 2px var(--preview-outline-color, rgba(255, 255, 255, 0.1)); /* УДАЛЕНО */
    /* --preview-outline-color: rgba(255, 255, 255, 0.1); /* УДАЛЕНО */
    transition: border-color 0.3s ease; /* Анимация рамки */
    /* --- КОНЕЦ: Откат обводки превью --- */
}

/* Стили для скинов превью (установка фона, рамка не меняется) */
.skin-preview.skin-default { background-color: var(--flask-color); }
.skin-preview.skin-gold { background-color: #ffd700; background-image: linear-gradient(45deg, #f0c040, #ffd700, #f8e080); }
.skin-preview.skin-crystal { background-color: #add8e6; background-image: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%); }
.skin-preview.skin-obsidian { background-color: #333; background-image: linear-gradient(0deg, #1a1a1a, #4d4d4d); }

.skin-info { /* ... */ }
.skin-info h3 { /* ... */ }
.skin-cost { /* ... */ }
/* ... (остальные стили кнопок скинов) ... */

/* Стили для самой колбы (только фон) */
.cauldron.skin-default { background-color: var(--flask-color); background-image: none; }
.cauldron.skin-gold { background-color: #ffd700; background-image: linear-gradient(45deg, #f0c040, #ffd700, #f8e080); }
.cauldron.skin-crystal { background-color: #add8e6; background-image: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%); }
.cauldron.skin-obsidian { background-color: #333; background-image: linear-gradient(0deg, #1a1a1a, #4d4d4d); }
/* Переменная --current-outline-color удалена из этих правил */


.hidden { display: none !important; }

/* Стили для настроек звука удалены */

/* Адаптация */
@media (min-width: 600px) { /* ... */ }

/* Уведомления */
.notification { /* ... */ }
.notification.info { /* ... */ }
/* ... (остальные стили уведомлений) ... */